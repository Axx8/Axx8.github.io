<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
	<meta name="referrer" content="no-referrer">
	<meta name="DNT" content="1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP地址查询工具 - 科技版</title>
    <style>
        :root {
            --primary-color: #00a8ff;
            --secondary-color: #0097e6;
            --dark-color: #1e272e;
            --light-color: #f5f6fa;
            --success-color: #4cd137;
            --warning-color: #e84118;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: var(--dark-color);
            color: var(--light-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(0, 168, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(0, 168, 255, 0.1) 0%, transparent 50%);
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
        }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, var(--primary-color), #00d2d3);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            position: relative;
            display: inline-block;
        }
        
        h1::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), #00d2d3);
            border-radius: 3px;
        }
        
        .description {
            color: #a4b0be;
            margin-bottom: 1.5rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .search-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            background-color: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 168, 255, 0.2);
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }
        
        .search-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 168, 255, 0.3);
        }
        
        .search-btn:active {
            transform: translateY(0);
        }
        
        .search-btn i {
            font-size: 1.2rem;
        }
        
        .my-ip-btn {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .my-ip-btn:hover {
            background: rgba(0, 168, 255, 0.1);
        }
        
        .results-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 2rem;
        }
        
        .result-card {
            background: rgba(30, 39, 46, 0.7);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        .result-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .result-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .result-title i {
            font-size: 1.5rem;
        }
        
        .result-item {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .result-label {
            color: #a4b0be;
            font-weight: 500;
        }
        
        .result-value {
            color: white;
            text-align: right;
            max-width: 60%;
            word-break: break-word;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 2rem 0;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(0, 168, 255, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .error-message {
            color: var(--warning-color);
            text-align: center;
            margin: 1rem 0;
            display: none;
        }
        
        footer {
            margin-top: 3rem;
            text-align: center;
            color: #a4b0be;
            font-size: 0.9rem;
        }
        
        .api-status {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #7f8c8d;
        }
        
        .status-dot.active {
            background-color: var(--success-color);
            box-shadow: 0 0 10px var(--success-color);
        }
        
        @media (max-width: 768px) {
            .search-box {
                flex-direction: column;
            }
            
            .results-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>IP地址查询工具</h1>
            <p class="description">一个强大的IP地址查询工具，整合多个API接口，提供全面的IP信息查询服务。</p>
            
            <div class="search-box">
                <input type="text" class="search-input" id="ip-input" placeholder="输入IP地址 (例如: 8.8.8.8)">
                <button class="search-btn" id="search-btn">
                    <i class="fas fa-search"></i> 查询
                </button>
                <button class="search-btn my-ip-btn" id="my-ip-btn">
                    <i class="fas fa-location-arrow"></i> 我的IP
                </button>
            </div>
            
            <div class="error-message" id="error-message"></div>
        </header>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>正在查询中，请稍候...</p>
        </div>
        
        <div class="results-container" id="results-container">
            <!-- 结果卡片将通过JavaScript动态生成 -->
        </div>
        
        <div class="api-status" id="api-status">
            <!-- API状态将通过JavaScript动态生成 -->
        </div>
        
        <footer>
            <p>© 2023 IP地址查询工具 | 数据来自多个公开API</p>
			<p class="privacy-notice">本工具尊重您的隐私，已启用DNT(禁止追踪)和GPC(全局隐私控制)</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const ipInput = document.getElementById('ip-input');
            const searchBtn = document.getElementById('search-btn');
            const myIpBtn = document.getElementById('my-ip-btn');
            const resultsContainer = document.getElementById('results-container');
            const loadingElement = document.getElementById('loading');
            const errorMessage = document.getElementById('error-message');
            const apiStatusContainer = document.getElementById('api-status');
            
            // 初始化API状态显示
            const apis = [
                { name: 'ip.sb', url: 'https://api.ip.sb/geoip', active: false },
                { name: 'cip.cc', url: 'https://www.cip.cc', active: false },
                { name: 'ipip.net', url: 'https://myip.ipip.net/', active: false },
                { name: 'ipinfo.io', url: 'https://ipinfo.io/', active: false },
                { name: 'ip-api.com', url: 'http://ip-api.com/json/', active: false },
                { name: 'ipplus360', url: 'https://www.ipplus360.com/getLocation', active: false }
            ];
            
            function updateApiStatus() {
                apiStatusContainer.innerHTML = '';
                apis.forEach(api => {
                    const statusItem = document.createElement('div');
                    statusItem.className = 'status-item';
                    
                    const statusDot = document.createElement('div');
                    statusDot.className = `status-dot ${api.active ? 'active' : ''}`;
                    
                    const statusText = document.createElement('span');
                    statusText.textContent = api.name;
                    
                    statusItem.appendChild(statusDot);
                    statusItem.appendChild(statusText);
                    apiStatusContainer.appendChild(statusItem);
                });
            }
            
            updateApiStatus();
            
            // 验证IP地址格式
            function isValidIP(ip) {
                if (ip === 'localhost') return true;
                const ipv4Regex = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
                const ipv6Regex = /^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;
                return ipv4Regex.test(ip) || ipv6Regex.test(ip);
            }
            
            // 显示错误信息
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 5000);
            }
            
            // 获取我的IP地址
            async function getMyIP() {
                try {
                    loadingElement.style.display = 'block';
                    resultsContainer.innerHTML = '';
                    
                    const response = await fetch('https://ifconfig.me/ip');
                    if (!response.ok) throw new Error('获取IP地址失败');
                    
                    const ip = await response.text();
                    ipInput.value = ip;
                    await searchIP(ip);
                } catch (error) {
                    showError(`获取我的IP地址失败: ${error.message}`);
                    console.error(error);
                } finally {
                    loadingElement.style.display = 'none';
                }
            }
            
            // 查询IP地址
            async function searchIP(ip) {
                if (!isValidIP(ip)) {
                    showError('请输入有效的IP地址');
                    return;
                }
                
                try {
                    loadingElement.style.display = 'block';
                    resultsContainer.innerHTML = '';
                    errorMessage.style.display = 'none';
                    
                    // 并行调用所有API
                    const promises = [
                        fetchIPSB(ip),
                        fetchCipCC(ip),
                        fetchIpipNet(ip),
                        fetchIpInfo(ip),
                        fetchIpApi(ip),
                        fetchIpplus360(ip)
                    ];
                    
                    const results = await Promise.allSettled(promises);
                    
                    // 更新API状态
                    results.forEach((result, index) => {
                        apis[index].active = result.status === 'fulfilled';
                    });
                    updateApiStatus();
                    
                    // 显示成功的结果
                    results.forEach(result => {
                        if (result.status === 'fulfilled' && result.value) {
                            createResultCard(result.value);
                        }
                    });
                    
                    if (results.every(result => result.status === 'rejected')) {
                        showError('所有API查询失败，请稍后再试');
                    }
                } catch (error) {
                    showError(`查询失败: ${error.message}`);
                    console.error(error);
                } finally {
                    loadingElement.style.display = 'none';
                }
            }
            
            // 创建结果卡片
            function createResultCard(data) {
                const card = document.createElement('div');
                card.className = 'result-card';
                
                const title = document.createElement('div');
                title.className = 'result-title';
                
                const icon = document.createElement('i');
                icon.className = data.icon || 'fas fa-globe';
                title.appendChild(icon);
                
                const titleText = document.createElement('h2');
                titleText.textContent = data.title || 'IP信息';
                title.appendChild(titleText);
                
                card.appendChild(title);
                
                // 添加IP信息项
                for (const key in data.data) {
                    if (data.data.hasOwnProperty(key)) {
                        const item = document.createElement('div');
                        item.className = 'result-item';
                        
                        const label = document.createElement('span');
                        label.className = 'result-label';
                        label.textContent = key + ':';
                        
                        const value = document.createElement('span');
                        value.className = 'result-value';
                        value.textContent = data.data[key] || '未知';
                        
                        item.appendChild(label);
                        item.appendChild(value);
                        card.appendChild(item);
                    }
                }
                
                resultsContainer.appendChild(card);
            }
            
            // 调用ip.sb API
            async function fetchIPSB(ip) {
                try {
                    const response = await fetch(`https://api.ip.sb/geoip/${ip}`);
                    if (!response.ok) throw new Error('ip.sb API请求失败');
                    
                    const data = await response.json();
                    return {
                        title: 'IP.SB',
                        icon: 'fas fa-map-marker-alt',
                        data: {
                            'IP地址': ip,
                            '国家': data.country,
                            '地区': data.region,
                            '城市': data.city,
                            'ISP': data.isp,
                            '组织': data.organization,
                            'ASN': data.asn,
                            'ASN组织': data.asn_organization,
                            '经纬度': `${data.latitude}, ${data.longitude}`,
                            '时区': data.timezone
                        }
                    };
                } catch (error) {
                    console.error('ip.sb API错误:', error);
                    return null;
                }
            }
            
            // 调用cip.cc API
            async function fetchCipCC(ip) {
                try {
                    const response = await fetch(`https://www.cip.cc/${ip}`);
                    if (!response.ok) throw new Error('cip.cc API请求失败');
                    
                    const text = await response.text();
                    const lines = text.split('\n');
                    const data = {};
                    
                    lines.forEach(line => {
                        if (line.includes(':')) {
                            const [key, value] = line.split(':').map(item => item.trim());
                            if (key && value) {
                                data[key] = value;
                            }
                        }
                    });
                    
                    return {
                        title: 'CIP.CC',
                        icon: 'fas fa-network-wired',
                        data: {
                            'IP地址': ip,
                            '地理位置': data['地址'] || '未知',
                            '运营商': data['运营商'] || '未知',
                            '数据二': data['数据二'] || '未知',
                            '数据三': data['数据三'] || '未知'
                        }
                    };
                } catch (error) {
                    console.error('cip.cc API错误:', error);
                    return null;
                }
				        }
        
        // 调用ipip.net API
        async function fetchIpipNet(ip) {
            try {
                const response = await fetch(`https://myip.ipip.net/ip?ip=${ip}`);
                if (!response.ok) throw new Error('ipip.net API请求失败');
                
                const text = await response.text();
                const match = text.match(/来自：(.+)/);
                const location = match ? match[1].trim() : '未知';
                
                return {
                    title: 'IPIP.NET',
                    icon: 'fas fa-map',
                    data: {
                        'IP地址': ip,
                        '地理位置': location
                    }
                };
            } catch (error) {
                console.error('ipip.net API错误:', error);
                return null;
            }
        }
        
        // 调用ipinfo.io API
        async function fetchIpInfo(ip) {
    try {
        const response = await fetch(`https://ipinfo.io/${ip}/json`, {
            headers: {
                'Accept': 'application/json',
                'DNT': '1', // 添加禁止追踪头部
                'Sec-GPC': '1' // 全局隐私控制
            }
        });
        if (!response.ok) throw new Error('ipinfo.io API请求失败');
        
        const data = await response.json();
        return {
            title: 'IPInfo.io',
            icon: 'fas fa-info-circle',
            data: {
                'IP地址': ip,
                '主机名': data.hostname || '未知',
                '城市': data.city || '未知',
                '地区': data.region || '未知',
                '国家': data.country || '未知',
                '位置': data.loc || '未知',
                '组织': data.org || '未知',
                '邮编': data.postal || '未知',
                '时区': data.timezone || '未知',
                '隐私保护': '已启用DNT头部'
            }
        };
    } catch (error) {
        console.error('ipinfo.io API错误:', error);
        return null;
    }
}
        
        // 调用ip-api.com API
        async function fetchIpApi(ip) {
            try {
                const response = await fetch(`http://ip-api.com/json/${ip}`);
                if (!response.ok) throw new Error('ip-api.com API请求失败');
                
                const data = await response.json();
                if (data.status !== 'success') throw new Error(data.message || '查询失败');
                
                return {
                    title: 'IP-API.com',
                    icon: 'fas fa-server',
                    data: {
                        'IP地址': ip,
                        '国家': data.country,
                        '国家代码': data.countryCode,
                        '地区': data.regionName,
                        '城市': data.city,
                        '邮编': data.zip,
                        '时区': data.timezone,
                        'ISP': data.isp,
                        '组织': data.org,
                        'AS': data.as,
                        '经纬度': `${data.lat}, ${data.lon}`
                    }
                };
            } catch (error) {
                console.error('ip-api.com API错误:', error);
                return null;
            }
        }
        
        // 调用ipplus360 API
        async function fetchIpplus360(ip) {
            try {
                const response = await fetch(`https://www.ipplus360.com/getLocation?ip=${ip}`);
                if (!response.ok) throw new Error('ipplus360 API请求失败');
                
                const data = await response.json();
                return {
                    title: 'IPPlus360',
                    icon: 'fas fa-map-pin',
                    data: {
                        'IP地址': ip,
                        '国家': data.country || '未知',
                        '省份': data.province || '未知',
                        '城市': data.city || '未知',
                        '区县': data.district || '未知',
                        '运营商': data.isp || '未知',
                        '经纬度': data.longitude && data.latitude ? `${data.latitude}, ${data.longitude}` : '未知'
                    }
                };
            } catch (error) {
                console.error('ipplus360 API错误:', error);
                return null;
            }
        }
        
        // 事件监听
        searchBtn.addEventListener('click', () => {
            const ip = ipInput.value.trim();
            if (ip) {
                searchIP(ip);
            } else {
                showError('请输入要查询的IP地址');
            }
        });
        
        myIpBtn.addEventListener('click', getMyIP);
        
        ipInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const ip = ipInput.value.trim();
                if (ip) {
                    searchIP(ip);
                } else {
                    showError('请输入要查询的IP地址');
                }
            }
        });
        
        // 初始化时获取用户自己的IP
        getMyIP();
    });
</script>
</body> </html>
				
